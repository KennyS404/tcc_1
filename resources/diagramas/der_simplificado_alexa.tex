% Diagrama de Entidade e Relacionamento (DER) - Entidades relevantes para Alexa
\begin{figura}{Diagrama de Entidade e Relacionamento (DER) - Entidades relevantes para integração Alexa}{O Autor}
\centering
\begin{tikzpicture}[scale=0.9]
% Definição de estilos
\tikzset{
  entity/.style={rectangle, draw, fill=blue!20, text width=2.5cm, align=center, minimum height=1.2cm},
  attribute/.style={ellipse, draw, fill=yellow!20, text width=1.8cm, align=center, minimum height=0.6cm},
  relationship/.style={diamond, draw, fill=green!20, text width=1.5cm, align=center, minimum height=0.8cm}
}

% Entidades principais
\node[entity] (user) at (0,6) {\textbf{USER}\\
\underline{id}\\
email\\
password\\
planType\\
status};

\node[entity] (enxame) at (0,3) {\textbf{ENXAME}\\
\underline{id}\\
userId\\
especie\\
estadoOrigem\\
localizacao\\
identificador\\
forcaEnxame\\
createddate};

\node[entity] (alimentacao) at (-4,0) {\textbf{ALIMENTACAO}\\
\underline{id}\\
enxameId\\
tipo\\
quantidade\\
observacao\\
createddate};

\node[entity] (colheita) at (0,0) {\textbf{COLHEITA}\\
\underline{id}\\
enxameId\\
quantidade\\
tipo\\
observacao\\
createddate};

\node[entity] (manejo) at (4,0) {\textbf{MANEJO}\\
\underline{id}\\
enxameId\\
tipo\\
descricao\\
createddate};

\node[entity] (revisao) at (-2,-3) {\textbf{REVISAO}\\
\underline{id}\\
enxameId\\
tipo\\
observacao\\
createddate};

\node[entity] (dashboard) at (2,-3) {\textbf{DASHBOARD}\\
\underline{id}\\
userId\\
totalEnxames\\
totalColheita\\
ultimaAtividade};

% Relacionamentos
\node[relationship] (user_enxame) at (0,4.5) {possui};
\node[relationship] (enxame_alimentacao) at (-2,1.5) {tem};
\node[relationship] (enxame_colheita) at (0,1.5) {produz};
\node[relationship] (enxame_manejo) at (2,1.5) {recebe};
\node[relationship] (enxame_revisao) at (-1,-1.5) {inspecionado};
\node[relationship] (user_dashboard) at (1,-1.5) {visualiza};

% Conexões
\draw[->] (user) -- (user_enxame);
\draw[->] (user_enxame) -- (enxame);

\draw[->] (enxame) -- (enxame_alimentacao);
\draw[->] (enxame_alimentacao) -- (alimentacao);

\draw[->] (enxame) -- (enxame_colheita);
\draw[->] (enxame_colheita) -- (colheita);

\draw[->] (enxame) -- (enxame_manejo);
\draw[->] (enxame_manejo) -- (manejo);

\draw[->] (enxame) -- (enxame_revisao);
\draw[->] (enxame_revisao) -- (revisao);

\draw[->] (user) -- (user_dashboard);
\draw[->] (user_dashboard) -- (dashboard);

% Cardinalidades
\node at (-0.3,5.2) {1};
\node at (0.3,5.2) {N};

\node at (-2.3,2.2) {1};
\node at (-1.7,2.2) {N};

\node at (-0.3,2.2) {1};
\node at (0.3,2.2) {N};

\node at (1.7,2.2) {1};
\node at (2.3,2.2) {N};

\node at (-1.3,-0.8) {1};
\node at (-0.7,-0.8) {N};

\node at (0.7,-0.8) {1};
\node at (1.3,-0.8) {1};

\end{tikzpicture}
\label{fig:der-alexa}
\end{figura}